<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
</head>
<body>
    <%- include(`./partials/navbarLogin.ejs`) %>
    <h1>Profile</h1>
    <% if (msg) { %>
    <p><%= msg %></p>
    <% } %>
    <label for="">Name: <%= user.UserProfile.fullName %></label><br>
    <label for="">Date of Birth: <%= user.UserProfile.toFormatDate %></label><br>
    <label for="">Gender: <%= user.UserProfile.gender %></label><br><br>
    <a href="/updateProfile"><button>Update Profile</button></a><br>
    <% if (user.role == `user`) { %>
        <h3>Investments List:</h3>
        <table>
            <table>
                <tr>
                    <th>No.</th>
                    <th>Name</th>
                    <th>Stock</th>
                    <th>Value</th>
                    <th>Action</th>
                </tr>
                <% investment.forEach((e, i) => { %>
                    <tr>
                        <td><%= i + 1 %></td>
                        <td><%= e.name %></td>
                        <td><%= e.heldStock %></td>
                        <td><%= e.value %></td>
                        <td>
                            <a href="/sellStock/<%= e.id %>">Sell</a>
                        </td>
                    </tr>
                <% }) %>
            </table>
        </table>
    <% } %>
    <% if (user.role == `admin`) { %>
        <a href="/editStock"><button>Edit Stock</button></a>
    <% } %>
</body>
</html>